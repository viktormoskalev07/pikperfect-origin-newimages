(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.Popper=t()})(this,function(){'use strict';function e(e){return e&&'[object Function]'==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=e.ownerDocument.defaultView,n=o.getComputedStyle(e,null);return t?n[t]:n}function o(e){return'HTML'===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e)return document.body;switch(e.nodeName){case'HTML':case'BODY':return e.ownerDocument.body;case'#document':return e.body;}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return /(auto|scroll|overlay)/.test(r+s+p)?e:n(o(e))}function r(e){return 11===e?pe:10===e?se:pe||se}function p(e){if(!e)return document.documentElement;for(var o=r(10)?document.body:null,n=e.offsetParent||null;n===o&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&'BODY'!==i&&'HTML'!==i?-1!==['TH','TD','TABLE'].indexOf(n.nodeName)&&'static'===t(n,'position')?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function s(e){var t=e.nodeName;return'BODY'!==t&&('HTML'===t||p(e.firstElementChild)===e)}function d(e){return null===e.parentNode?e:d(e.parentNode)}function a(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=o?e:t,i=o?t:e,r=document.createRange();r.setStart(n,0),r.setEnd(i,0);var l=r.commonAncestorContainer;if(e!==l&&t!==l||n.contains(i))return s(l)?l:p(l);var f=d(e);return f.host?a(f.host,t):a(e,d(t).host)}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'top',o='top'===t?'scrollTop':'scrollLeft',n=e.nodeName;if('BODY'===n||'HTML'===n){var i=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||i;return r[o]}return e[o]}function f(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=l(t,'top'),i=l(t,'left'),r=o?-1:1;return e.top+=n*r,e.bottom+=n*r,e.left+=i*r,e.right+=i*r,e}function m(e,t){var o='x'===t?'Left':'Top',n='Left'==o?'Right':'Bottom';return parseFloat(e['border'+o+'Width'],10)+parseFloat(e['border'+n+'Width'],10)}function h(e,t,o,n){return ee(t['offset'+e],t['scroll'+e],o['client'+e],o['offset'+e],o['scroll'+e],r(10)?parseInt(o['offset'+e])+parseInt(n['margin'+('Height'===e?'Top':'Left')])+parseInt(n['margin'+('Height'===e?'Bottom':'Right')]):0)}function c(e){var t=e.body,o=e.documentElement,n=r(10)&&getComputedStyle(o);return{height:h('Height',t,o,n),width:h('Width',t,o,n)}}function g(e){return fe({},e,{right:e.left+e.width,bottom:e.top+e.height})}function u(e){var o={};try{if(r(10)){o=e.getBoundingClientRect();var n=l(e,'top'),i=l(e,'left');o.top+=n,o.left+=i,o.bottom+=n,o.right+=i}else o=e.getBoundingClientRect()}catch(t){}var p={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},s='HTML'===e.nodeName?c(e.ownerDocument):{},d=s.width||e.clientWidth||p.right-p.left,a=s.height||e.clientHeight||p.bottom-p.top,f=e.offsetWidth-d,h=e.offsetHeight-a;if(f||h){var u=t(e);f-=m(u,'x'),h-=m(u,'y'),p.width-=f,p.height-=h}return g(p)}function b(e,o){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],p=r(10),s='HTML'===o.nodeName,d=u(e),a=u(o),l=n(e),m=t(o),h=parseFloat(m.borderTopWidth,10),c=parseFloat(m.borderLeftWidth,10);i&&s&&(a.top=ee(a.top,0),a.left=ee(a.left,0));var b=g({top:d.top-a.top-h,left:d.left-a.left-c,width:d.width,height:d.height});if(b.marginTop=0,b.marginLeft=0,!p&&s){var w=parseFloat(m.marginTop,10),y=parseFloat(m.marginLeft,10);b.top-=h-w,b.bottom-=h-w,b.left-=c-y,b.right-=c-y,b.marginTop=w,b.marginLeft=y}return(p&&!i?o.contains(l):o===l&&'BODY'!==l.nodeName)&&(b=f(b,o)),b}function w(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.ownerDocument.documentElement,n=b(e,o),i=ee(o.clientWidth,window.innerWidth||0),r=ee(o.clientHeight,window.innerHeight||0),p=t?0:l(o),s=t?0:l(o,'left'),d={top:p-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:i,height:r};return g(d)}function y(e){var n=e.nodeName;if('BODY'===n||'HTML'===n)return!1;if('fixed'===t(e,'position'))return!0;var i=o(e);return!!i&&y(i)}function E(e){if(!e||!e.parentElement||r())return document.documentElement;for(var o=e.parentElement;o&&'none'===t(o,'transform');)o=o.parentElement;return o||document.documentElement}function v(e,t,i,r){var p=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},d=p?E(e):a(e,t);if('viewport'===r)s=w(d,p);else{var l;'scrollParent'===r?(l=n(o(t)),'BODY'===l.nodeName&&(l=e.ownerDocument.documentElement)):'window'===r?l=e.ownerDocument.documentElement:l=r;var f=b(l,d,p);if('HTML'===l.nodeName&&!y(d)){var m=c(e.ownerDocument),h=m.height,g=m.width;s.top+=f.top-f.marginTop,s.bottom=h+f.top,s.left+=f.left-f.marginLeft,s.right=g+f.left}else s=f}i=i||0;var u='number'==typeof i;return s.left+=u?i:i.left||0,s.top+=u?i:i.top||0,s.right-=u?i:i.right||0,s.bottom-=u?i:i.bottom||0,s}function x(e){var t=e.width,o=e.height;return t*o}function O(e,t,o,n,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var p=v(o,n,r,i),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return fe({key:e},s[e],{area:x(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,n=e.height;return t>=o.clientWidth&&n>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split('-')[1];return l+(f?'-'+f:'')}function L(e,t,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=n?E(t):a(t,o);return b(o,i,n)}function S(e){var t=e.ownerDocument.defaultView,o=t.getComputedStyle(e),n=parseFloat(o.marginTop||0)+parseFloat(o.marginBottom||0),i=parseFloat(o.marginLeft||0)+parseFloat(o.marginRight||0),r={width:e.offsetWidth+i,height:e.offsetHeight+n};return r}function T(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function D(e,t,o){o=o.split('-')[0];var n=S(e),i={width:n.width,height:n.height},r=-1!==['right','left'].indexOf(o),p=r?'top':'left',s=r?'left':'top',d=r?'height':'width',a=r?'width':'height';return i[p]=t[p]+t[d]/2-n[d]/2,i[s]=o===s?t[s]-n[a]:t[T(s)],i}function C(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function N(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var n=C(e,function(e){return e[t]===o});return e.indexOf(n)}function P(t,o,n){var i=void 0===n?t:t.slice(0,N(t,'name',n));return i.forEach(function(t){t['function']&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var n=t['function']||t.fn;t.enabled&&e(n)&&(o.offsets.popper=g(o.offsets.popper),o.offsets.reference=g(o.offsets.reference),o=n(o,t))}),o}function k(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=O(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=D(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?'fixed':'absolute',e=P(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some(function(e){var o=e.name,n=e.enabled;return n&&o===t})}function H(e){for(var t=[!1,'ms','Webkit','Moz','O'],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var i=t[n],r=i?''+i+o:e;if('undefined'!=typeof document.body.style[r])return r}return null}function B(){return this.state.isDestroyed=!0,W(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.position='',this.popper.style.top='',this.popper.style.left='',this.popper.style.right='',this.popper.style.bottom='',this.popper.style.willChange='',this.popper.style[H('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function A(e){var t=e.ownerDocument;return t?t.defaultView:window}function M(e,t,o,i){var r='BODY'===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0}),r||M(n(p.parentNode),t,o,i),i.push(p)}function F(e,t,o,i){o.updateBound=i,A(e).addEventListener('resize',o.updateBound,{passive:!0});var r=n(e);return M(r,'scroll',o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function I(){this.state.eventsEnabled||(this.state=F(this.reference,this.options,this.state,this.scheduleUpdate))}function R(e,t){return A(e).removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function U(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=R(this.reference,this.state))}function Y(e){return''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function j(e,t){Object.keys(t).forEach(function(o){var n='';-1!==['width','height','top','right','bottom','left'].indexOf(o)&&Y(t[o])&&(n='px'),e.style[o]=t[o]+n})}function V(e,t){Object.keys(t).forEach(function(o){var n=t[o];!1===n?e.removeAttribute(o):e.setAttribute(o,t[o])})}function q(e,t){var o=e.offsets,n=o.popper,i=o.reference,r=$,p=function(e){return e},s=r(i.width),d=r(n.width),a=-1!==['left','right'].indexOf(e.placement),l=-1!==e.placement.indexOf('-'),f=t?a||l||s%2==d%2?r:Z:p,m=t?r:p;return{left:f(1==s%2&&1==d%2&&!l&&t?n.left-1:n.left),top:m(n.top),bottom:m(n.bottom),right:f(n.right)}}function K(e,t,o){var n=C(e,function(e){var o=e.name;return o===t}),i=!!n&&e.some(function(e){return e.name===o&&e.enabled&&e.order<n.order});if(!i){var r='`'+t+'`';console.warn('`'+o+'`'+' modifier is required by '+r+' modifier in order to work, be sure to include it before '+r+'!')}return i}function z(e){return'end'===e?'start':'start'===e?'end':e}function G(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=ce.indexOf(e),n=ce.slice(o+1).concat(ce.slice(0,o));return t?n.reverse():n}function _(e,t,o,n){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+i[1],p=i[2];if(!r)return e;if(0===p.indexOf('%')){var s;switch(p){case'%p':s=o;break;case'%':case'%r':default:s=n;}var d=g(s);return d[t]/100*r}if('vh'===p||'vw'===p){var a;return a='vh'===p?ee(document.documentElement.clientHeight,window.innerHeight||0):ee(document.documentElement.clientWidth,window.innerWidth||0),a/100*r}return r}function X(e,t,o,n){var i=[0,0],r=-1!==['right','left'].indexOf(n),p=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=p.indexOf(C(p,function(e){return-1!==e.search(/,|\s/)}));p[s]&&-1===p[s].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var d=/\s*,\s*|\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return a=a.map(function(e,n){var i=(1===n?!r:r)?'height':'width',p=!1;return e.reduce(function(e,t){return''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)},[]).map(function(e){return _(e,i,t,o)})}),a.forEach(function(e,t){e.forEach(function(o,n){Y(o)&&(i[t]+=o*('-'===e[n-1]?-1:1))})}),i}function J(e,t){var o,n=t.offset,i=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=i.split('-')[0];return o=Y(+n)?[+n,0]:X(n,p,s,d),'left'===d?(p.top+=o[0],p.left-=o[1]):'right'===d?(p.top+=o[0],p.left+=o[1]):'top'===d?(p.left+=o[0],p.top-=o[1]):'bottom'===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e}for(var Q=Math.min,Z=Math.floor,$=Math.round,ee=Math.max,te='undefined'!=typeof window&&'undefined'!=typeof document,oe=['Edge','Trident','Firefox'],ne=0,ie=0;ie<oe.length;ie+=1)if(te&&0<=navigator.userAgent.indexOf(oe[ie])){ne=1;break}var i=te&&window.Promise,re=i?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},ne))}},pe=te&&!!(window.MSInputMethodContext&&document.documentMode),se=te&&/MSIE 10/.test(navigator.userAgent),de=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},ae=function(){function e(e,t){for(var o,n=0;n<t.length;n++)o=t[n],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),le=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},fe=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},me=te&&/Firefox/i.test(navigator.userAgent),he=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],ce=he.slice(3),ge={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},ue=function(){function t(o,n){var i=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};de(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=re(this.update.bind(this)),this.options=fe({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o&&o.jquery?o[0]:o,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(fe({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){i.options.modifiers[e]=fe({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return fe({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return ae(t,[{key:'update',value:function(){return k.call(this)}},{key:'destroy',value:function(){return B.call(this)}},{key:'enableEventListeners',value:function(){return I.call(this)}},{key:'disableEventListeners',value:function(){return U.call(this)}}]),t}();return ue.Utils=('undefined'==typeof window?global:window).PopperUtils,ue.placements=he,ue.Defaults={placement:'bottom',positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split('-')[0],n=t.split('-')[1];if(n){var i=e.offsets,r=i.reference,p=i.popper,s=-1!==['bottom','top'].indexOf(o),d=s?'left':'top',a=s?'width':'height',l={start:le({},d,r[d]),end:le({},d,r[d]+r[a]-p[a])};e.offsets.popper=fe({},p,l[n])}return e}},offset:{order:200,enabled:!0,fn:J,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||p(e.instance.popper);e.instance.reference===o&&(o=p(o));var n=H('transform'),i=e.instance.popper.style,r=i.top,s=i.left,d=i[n];i.top='',i.left='',i[n]='';var a=v(e.instance.popper,e.instance.reference,t.padding,o,e.positionFixed);i.top=r,i.left=s,i[n]=d,t.boundaries=a;var l=t.priority,f=e.offsets.popper,m={primary:function(e){var o=f[e];return f[e]<a[e]&&!t.escapeWithReference&&(o=ee(f[e],a[e])),le({},e,o)},secondary:function(e){var o='right'===e?'left':'top',n=f[o];return f[e]>a[e]&&!t.escapeWithReference&&(n=Q(f[o],a[e]-('right'===e?f.width:f.height))),le({},o,n)}};return l.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';f=fe({},f,m[t](e))}),e.offsets.popper=f,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,n=t.reference,i=e.placement.split('-')[0],r=Z,p=-1!==['top','bottom'].indexOf(i),s=p?'right':'bottom',d=p?'left':'top',a=p?'width':'height';return o[s]<r(n[d])&&(e.offsets.popper[d]=r(n[d])-o[a]),o[d]>r(n[s])&&(e.offsets.popper[d]=r(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){var n;if(!K(e.instance.modifiers,'arrow','keepTogether'))return e;var i=o.element;if('string'==typeof i){if(i=e.instance.popper.querySelector(i),!i)return e;}else if(!e.instance.popper.contains(i))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var r=e.placement.split('-')[0],p=e.offsets,s=p.popper,d=p.reference,a=-1!==['left','right'].indexOf(r),l=a?'height':'width',f=a?'Top':'Left',m=f.toLowerCase(),h=a?'left':'top',c=a?'bottom':'right',u=S(i)[l];d[c]-u<s[m]&&(e.offsets.popper[m]-=s[m]-(d[c]-u)),d[m]+u>s[c]&&(e.offsets.popper[m]+=d[m]+u-s[c]),e.offsets.popper=g(e.offsets.popper);var b=d[m]+d[l]/2-u/2,w=t(e.instance.popper),y=parseFloat(w['margin'+f],10),E=parseFloat(w['border'+f+'Width'],10),v=b-e.offsets.popper[m]-y-E;return v=ee(Q(s[l]-u,v),0),e.arrowElement=i,e.offsets.arrow=(n={},le(n,m,$(v)),le(n,h,''),n),e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=v(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split('-')[0],i=T(n),r=e.placement.split('-')[1]||'',p=[];switch(t.behavior){case ge.FLIP:p=[n,i];break;case ge.CLOCKWISE:p=G(n);break;case ge.COUNTERCLOCKWISE:p=G(n,!0);break;default:p=t.behavior;}return p.forEach(function(s,d){if(n!==s||p.length===d+1)return e;n=e.placement.split('-')[0],i=T(n);var a=e.offsets.popper,l=e.offsets.reference,f=Z,m='left'===n&&f(a.right)>f(l.left)||'right'===n&&f(a.left)<f(l.right)||'top'===n&&f(a.bottom)>f(l.top)||'bottom'===n&&f(a.top)<f(l.bottom),h=f(a.left)<f(o.left),c=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b='left'===n&&h||'right'===n&&c||'top'===n&&g||'bottom'===n&&u,w=-1!==['top','bottom'].indexOf(n),y=!!t.flipVariations&&(w&&'start'===r&&h||w&&'end'===r&&c||!w&&'start'===r&&g||!w&&'end'===r&&u);(m||b||y)&&(e.flipped=!0,(m||b)&&(n=p[d+1]),y&&(r=z(r)),e.placement=n+(r?'-'+r:''),e.offsets.popper=fe({},e.offsets.popper,D(e.instance.popper,e.offsets.reference,e.placement)),e=P(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport'},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split('-')[0],n=e.offsets,i=n.popper,r=n.reference,p=-1!==['left','right'].indexOf(o),s=-1===['top','left'].indexOf(o);return i[p?'left':'top']=r[o]-(s?i[p?'width':'height']:0),e.placement=T(t),e.offsets.popper=g(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!K(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,o=C(e.instance.modifiers,function(e){return'preventOverflow'===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,n=t.y,i=e.offsets.popper,r=C(e.instance.modifiers,function(e){return'applyStyle'===e.name}).gpuAcceleration;void 0!==r&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var s,d,a=void 0===r?t.gpuAcceleration:r,l=p(e.instance.popper),f=u(l),m={position:i.position},h=q(e,2>window.devicePixelRatio||!me),c='bottom'===o?'top':'bottom',g='right'===n?'left':'right',b=H('transform');if(d='bottom'==c?'HTML'===l.nodeName?-l.clientHeight+h.bottom:-f.height+h.bottom:h.top,s='right'==g?'HTML'===l.nodeName?-l.clientWidth+h.right:-f.width+h.right:h.left,a&&b)m[b]='translate3d('+s+'px, '+d+'px, 0)',m[c]=0,m[g]=0,m.willChange='transform';else{var w='bottom'==c?-1:1,y='right'==g?-1:1;m[c]=d*w,m[g]=s*y,m.willChange=c+', '+g}var E={"x-placement":e.placement};return e.attributes=fe({},E,e.attributes),e.styles=fe({},m,e.styles),e.arrowStyles=fe({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return j(e.instance.popper,e.styles),V(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&j(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,n,i){var r=L(i,t,e,o.positionFixed),p=O(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute('x-placement',p),j(t,{position:o.positionFixed?'fixed':'absolute'}),o},gpuAcceleration:void 0}}},ue});
/*! lazysizes - v5.2.2 */
!function(e){var t=function(u,D,f){"use strict";var k,H;if(function(){var e;var t={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:true,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:true,ricTimeout:0,throttleDelay:125};H=u.lazySizesConfig||u.lazysizesConfig||{};for(e in t){if(!(e in H)){H[e]=t[e]}}}(),!D||!D.getElementsByClassName){return{init:function(){},cfg:H,noSupport:true}}var O=D.documentElement,a=u.HTMLPictureElement,P="addEventListener",$="getAttribute",q=u[P].bind(u),I=u.setTimeout,U=u.requestAnimationFrame||I,l=u.requestIdleCallback,j=/^picture$/i,r=["load","error","lazyincluded","_lazyloaded"],i={},G=Array.prototype.forEach,J=function(e,t){if(!i[t]){i[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")}return i[t].test(e[$]("class")||"")&&i[t]},K=function(e,t){if(!J(e,t)){e.setAttribute("class",(e[$]("class")||"").trim()+" "+t)}},Q=function(e,t){var i;if(i=J(e,t)){e.setAttribute("class",(e[$]("class")||"").replace(i," "))}},V=function(t,i,e){var a=e?P:"removeEventListener";if(e){V(t,i)}r.forEach(function(e){t[a](e,i)})},X=function(e,t,i,a,r){var n=D.createEvent("Event");if(!i){i={}}i.instance=k;n.initEvent(t,!a,!r);n.detail=i;e.dispatchEvent(n);return n},Y=function(e,t){var i;if(!a&&(i=u.picturefill||H.pf)){if(t&&t.src&&!e[$]("srcset")){e.setAttribute("srcset",t.src)}i({reevaluate:true,elements:[e]})}else if(t&&t.src){e.src=t.src}},Z=function(e,t){return(getComputedStyle(e,null)||{})[t]},s=function(e,t,i){i=i||e.offsetWidth;while(i<H.minSize&&t&&!e._lazysizesWidth){i=t.offsetWidth;t=t.parentNode}return i},ee=function(){var i,a;var t=[];var r=[];var n=t;var s=function(){var e=n;n=t.length?r:t;i=true;a=false;while(e.length){e.shift()()}i=false};var e=function(e,t){if(i&&!t){e.apply(this,arguments)}else{n.push(e);if(!a){a=true;(D.hidden?I:U)(s)}}};e._lsFlush=s;return e}(),te=function(i,e){return e?function(){ee(i)}:function(){var e=this;var t=arguments;ee(function(){i.apply(e,t)})}},ie=function(e){var i;var a=0;var r=H.throttleDelay;var n=H.ricTimeout;var t=function(){i=false;a=f.now();e()};var s=l&&n>49?function(){l(t,{timeout:n});if(n!==H.ricTimeout){n=H.ricTimeout}}:te(function(){I(t)},true);return function(e){var t;if(e=e===true){n=33}if(i){return}i=true;t=r-(f.now()-a);if(t<0){t=0}if(e||t<9){s()}else{I(s,t)}}},ae=function(e){var t,i;var a=99;var r=function(){t=null;e()};var n=function(){var e=f.now()-i;if(e<a){I(n,a-e)}else{(l||r)(r)}};return function(){i=f.now();if(!t){t=I(n,a)}}},e=function(){var v,m,c,h,e;var y,z,g,p,C,b,A;var n=/^img$/i;var d=/^iframe$/i;var E="onscroll"in u&&!/(gle|ing)bot/.test(navigator.userAgent);var _=0;var w=0;var N=0;var M=-1;var x=function(e){N--;if(!e||N<0||!e.target){N=0}};var W=function(e){if(A==null){A=Z(D.body,"visibility")=="hidden"}return A||!(Z(e.parentNode,"visibility")=="hidden"&&Z(e,"visibility")=="hidden")};var S=function(e,t){var i;var a=e;var r=W(e);g-=t;b+=t;p-=t;C+=t;while(r&&(a=a.offsetParent)&&a!=D.body&&a!=O){r=(Z(a,"opacity")||1)>0;if(r&&Z(a,"overflow")!="visible"){i=a.getBoundingClientRect();r=C>i.left&&p<i.right&&b>i.top-1&&g<i.bottom+1}}return r};var t=function(){var e,t,i,a,r,n,s,l,o,u,f,c;var d=k.elements;if((h=H.loadMode)&&N<8&&(e=d.length)){t=0;M++;for(;t<e;t++){if(!d[t]||d[t]._lazyRace){continue}if(!E||k.prematureUnveil&&k.prematureUnveil(d[t])){R(d[t]);continue}if(!(l=d[t][$]("data-expand"))||!(n=l*1)){n=w}if(!u){u=!H.expand||H.expand<1?O.clientHeight>500&&O.clientWidth>500?500:370:H.expand;k._defEx=u;f=u*H.expFactor;c=H.hFac;A=null;if(w<f&&N<1&&M>2&&h>2&&!D.hidden){w=f;M=0}else if(h>1&&M>1&&N<6){w=u}else{w=_}}if(o!==n){y=innerWidth+n*c;z=innerHeight+n;s=n*-1;o=n}i=d[t].getBoundingClientRect();if((b=i.bottom)>=s&&(g=i.top)<=z&&(C=i.right)>=s*c&&(p=i.left)<=y&&(b||C||p||g)&&(H.loadHidden||W(d[t]))&&(m&&N<3&&!l&&(h<3||M<4)||S(d[t],n))){R(d[t]);r=true;if(N>9){break}}else if(!r&&m&&!a&&N<4&&M<4&&h>2&&(v[0]||H.preloadAfterLoad)&&(v[0]||!l&&(b||C||p||g||d[t][$](H.sizesAttr)!="auto"))){a=v[0]||d[t]}}if(a&&!r){R(a)}}};var i=ie(t);var B=function(e){var t=e.target;if(t._lazyCache){delete t._lazyCache;return}x(e);K(t,H.loadedClass);Q(t,H.loadingClass);V(t,L);X(t,"lazyloaded")};var a=te(B);var L=function(e){a({target:e.target})};var T=function(t,i){try{t.contentWindow.location.replace(i)}catch(e){t.src=i}};var F=function(e){var t;var i=e[$](H.srcsetAttr);if(t=H.customMedia[e[$]("data-media")||e[$]("media")]){e.setAttribute("media",t)}if(i){e.setAttribute("srcset",i)}};var s=te(function(t,e,i,a,r){var n,s,l,o,u,f;if(!(u=X(t,"lazybeforeunveil",e)).defaultPrevented){if(a){if(i){K(t,H.autosizesClass)}else{t.setAttribute("sizes",a)}}s=t[$](H.srcsetAttr);n=t[$](H.srcAttr);if(r){l=t.parentNode;o=l&&j.test(l.nodeName||"")}f=e.firesLoad||"src"in t&&(s||n||o);u={target:t};K(t,H.loadingClass);if(f){clearTimeout(c);c=I(x,2500);V(t,L,true)}if(o){G.call(l.getElementsByTagName("source"),F)}if(s){t.setAttribute("srcset",s)}else if(n&&!o){if(d.test(t.nodeName)){T(t,n)}else{t.src=n}}if(r&&(s||o)){Y(t,{src:n})}}if(t._lazyRace){delete t._lazyRace}Q(t,H.lazyClass);ee(function(){var e=t.complete&&t.naturalWidth>1;if(!f||e){if(e){K(t,"ls-is-cached")}B(u);t._lazyCache=true;I(function(){if("_lazyCache"in t){delete t._lazyCache}},9)}if(t.loading=="lazy"){N--}},true)});var R=function(e){if(e._lazyRace){return}var t;var i=n.test(e.nodeName);var a=i&&(e[$](H.sizesAttr)||e[$]("sizes"));var r=a=="auto";if((r||!m)&&i&&(e[$]("src")||e.srcset)&&!e.complete&&!J(e,H.errorClass)&&J(e,H.lazyClass)){return}t=X(e,"lazyunveilread").detail;if(r){re.updateElem(e,true,e.offsetWidth)}e._lazyRace=true;N++;s(e,t,r,a,i)};var r=ae(function(){H.loadMode=3;i()});var l=function(){if(H.loadMode==3){H.loadMode=2}r()};var o=function(){if(m){return}if(f.now()-e<999){I(o,999);return}m=true;H.loadMode=3;i();q("scroll",l,true)};return{_:function(){e=f.now();k.elements=D.getElementsByClassName(H.lazyClass);v=D.getElementsByClassName(H.lazyClass+" "+H.preloadClass);q("scroll",i,true);q("resize",i,true);q("pageshow",function(e){if(e.persisted){var t=D.querySelectorAll("."+H.loadingClass);if(t.length&&t.forEach){U(function(){t.forEach(function(e){if(e.complete){R(e)}})})}}});if(u.MutationObserver){new MutationObserver(i).observe(O,{childList:true,subtree:true,attributes:true})}else{O[P]("DOMNodeInserted",i,true);O[P]("DOMAttrModified",i,true);setInterval(i,999)}q("hashchange",i,true);["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){D[P](e,i,true)});if(/d$|^c/.test(D.readyState)){o()}else{q("load",o);D[P]("DOMContentLoaded",i);I(o,2e4)}if(k.elements.length){t();ee._lsFlush()}else{i()}},checkElems:i,unveil:R,_aLSL:l}}(),re=function(){var i;var n=te(function(e,t,i,a){var r,n,s;e._lazysizesWidth=a;a+="px";e.setAttribute("sizes",a);if(j.test(t.nodeName||"")){r=t.getElementsByTagName("source");for(n=0,s=r.length;n<s;n++){r[n].setAttribute("sizes",a)}}if(!i.detail.dataAttr){Y(e,i.detail)}});var a=function(e,t,i){var a;var r=e.parentNode;if(r){i=s(e,r,i);a=X(e,"lazybeforesizes",{width:i,dataAttr:!!t});if(!a.defaultPrevented){i=a.detail.width;if(i&&i!==e._lazysizesWidth){n(e,r,a,i)}}}};var e=function(){var e;var t=i.length;if(t){e=0;for(;e<t;e++){a(i[e])}}};var t=ae(e);return{_:function(){i=D.getElementsByClassName(H.autosizesClass);q("resize",t)},checkElems:t,updateElem:a}}(),t=function(){if(!t.i&&D.getElementsByClassName){t.i=true;re._();e._()}};return I(function(){H.init&&t()}),k={cfg:H,autoSizer:re,loader:e,init:t,uP:Y,aC:K,rC:Q,hC:J,fire:X,gW:s,rAF:ee}}(e,e.document,Date);e.lazySizes=t,"object"==typeof module&&module.exports&&(module.exports=t)}("undefined"!=typeof window?window:{});
!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n(require,exports,module):e.ouibounce=n()}(this,function(){return function(e,n){function o(e,n){return"undefined"==typeof e?n:e}function t(e){var n=24*e*60*60*1e3,o=new Date;return o.setTime(o.getTime()+n),"; expires="+o.toUTCString()}function i(){L.addEventListener("mouseleave",u),L.addEventListener("mouseenter",r),L.addEventListener("keydown",c)}function u(e){e.clientY>v||d(T,"true")&&!l||(w=setTimeout(m,p))}function r(){w&&(clearTimeout(w),w=null)}function c(e){g||d(T,"true")&&!l||e.metaKey&&76===e.keyCode&&(g=!0,w=setTimeout(m,p))}function d(e,n){return a()[e]===n}function a(){for(var e=document.cookie.split("; "),n={},o=e.length-1;o>=0;o--){var t=e[o].split("=");n[t[0]]=t[1]}return n}function m(){f(),y()}function f(){e&&(e.style.display="block"),s()}function s(e){var e=e||{};"undefined"!=typeof e.cookieExpire&&(E=t(e.cookieExpire)),e.sitewide===!0&&(b=";path=/"),"undefined"!=typeof e.cookieDomain&&(x=";domain="+e.cookieDomain),"undefined"!=typeof e.cookieName&&(T=e.cookieName),document.cookie=T+"=true"+E+x+b,L.removeEventListener("mouseleave",u),L.removeEventListener("mouseenter",r),L.removeEventListener("keydown",c)}var n=n||{},l=n.aggressive||!1,v=o(n.sensitivity,20),k=o(n.timer,1e3),p=o(n.delay,0),y=n.callback||function(){},E=t(n.cookieExpire)||"",x=n.cookieDomain?";domain="+n.cookieDomain:"",T=n.cookieName?n.cookieName:"viewedOuibounceModal",b=n.sitewide===!0?";path=/":"",w=null,L=document.documentElement;setTimeout(i,k);var g=!1;return{fire:f,disable:s}}});
var PikFlipbookItem=new(function(){$(document).on('click','.flipbookGalleryItem',function(e){e.preventDefault();var w=1080,h=800,left=(screen.width/2)-(w/2),top=(screen.height/2)-(h/2);window.open($(this).attr('href'),'name','height='+h+',left='+left+',top='+top+'scrollbars=yes,width='+w);});})();var HomeMenuScroll=new(function(){var onScroll=function(){if($(window).width()>768){if($(window).scrollTop()<=100){$('header.navbar').removeClass('navbar-fixed-top').removeClass('stickyHeader').addClass('navbar-static-top');}else{$('header.navbar').addClass('navbar-fixed-top').addClass('stickyHeader').removeClass('navbar-static-top');}}};function init(){$(window).scroll(onScroll).trigger("scroll");}
function disable(){$('header.navbar').removeClass('navbar-fixed-top').removeClass('stickyHeader').addClass('navbar-static-top');$(window).off("scroll",onScroll);}
init();return{onScroll:onScroll,disable:disable}})();function json_decode(str_json){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var j;var text=str_json;var walk=function(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);};cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('json_decode');}
var PhotobookUtil=(function(){var messages={};var values={photobook_format_id:3,cover_type_id:1,paper_quality_id:1,number_of_pages:60,pictures_per_page:2.5,price_region:'US',instructions:'',job_type:1,name:'',user_id:null,language:'en'};var loggedIn=false;function init(opts){values.user_id=opts.user_id;messages=opts.messages;initEvents();}
function getUserId(){return values.user_id;}
function initEvents(){$('.zone_photobook_name input[name="name"]').keyup(function(event){$(this).trigger('change');});$(document).on('keyup','#loginId :input',function(event){var keyCode=event.keyCode?event.keyCode:event.which;if(keyCode==10||keyCode==13){$('#loginId button').trigger('click');}});$(document).on('keyup','#registrationId :input',function(event){var keyCode=event.keyCode?event.keyCode:event.which;if(keyCode==10||keyCode==13){$('#registrationId button').trigger('click');}});}
function initDefaults(defaults){values=$.extend(values,defaults);$('#format_'+values.photobook_format_id).attr('checked',true);photobook.selectFormat(values.photobook_format_id);$("#cover_"+values.cover_type_id).attr('checked',true);$('#quality_'+values.paper_quality_id).attr('checked',true);photobook.setSelectedNumberOfPages(values.number_of_pages);$("#select-country").val(values.price_region);$("#SliderSingle").val(values.pictures_per_page);$("input[name=job_type][value="+values.job_type+"]").attr('checked',true);photobook.updatePrice();photobook.setupNumberOfPages();if(defaults.product){photobook.autoselectProduct(defaults.product);}}
function getCheckedValues(input){var allVals=[];input.each(function(){allVals.push($(this).val());});return allVals;}
function updateValues(){values.photobook_format_id=photobook.getFormat();values.cover_type_id=photobook.getCoverType();values.cover_type_color_id=photobook.getCoverTypeColor();values.paper_quality_id=photobook.getPaperQuality();values.number_of_pages=photobook.getSelectedNumberOfPages();values.pictures_per_page=$('#SliderSingle').val();values.price_region=$('#select-country option:selected').val();values.job_type=$('input[name="job_type"]:checked').val();values.embossing=$('input[name="embossing"]').val();}
function setValue(name,val){values[name]=val;switch(name){case'job_type':$('input[name="job_type"][value="'+val+'"]').attr('checked',true);$("input[name=job_type]:checked").click();break;case'number_of_pages':photobook.setSelectedNumberOfPages(val);photobook.updatePrice();break;case'pictures_per_page':$('#SliderSingle').val(val);photobook.updatePrice();break;}}
function getValue(name){return values[name];}
function getUploadData(){return{step:4,step_1_decide:$('input[name="step_1_decide"]:checked').val()?1:0,step_2_decide:$('input[name="step_2_decide"]:checked').val()?1:0,photobook_format_id:photobook.getFormat(),cover_type_id:photobook.getCoverType(),cover_type_color_id:photobook.getCoverTypeColor(),paper_quality_id:photobook.getPaperQuality(),content_finish:photobook.getContentFinish(),number_of_pages:photobook.getSelectedNumberOfPages(),pictures_per_page:$('#SliderSingle').val(),customer_msg:$('textarea[name="instructions"]').val(),price_region:PikCountrySelect.getCountry(),recommendations:$('#recommendations').serialize(),embossing:$('input[name="embossing"]').val(),upload_via_link:$('#uploadViaLink').val()};}
function checkIsLoggedIn(func){if(loggedIn){return func({success:true});}
$.post(values.setNewJobUrl,{step:3},function(resp){if(resp&&resp.success)loggedIn=true;func(resp);},'json');}
function getUpdateJobData(runtime){return{step:4,step_1_decide:$('input[name="step_1_decide"]:checked').val()?1:0,step_2_decide:$('input[name="step_2_decide"]:checked').val()?1:0,photobook_format_id:photobook.getFormat(),cover_type_id:photobook.getCoverType(),cover_type_color_id:photobook.getCoverTypeColor(),paper_quality_id:photobook.getPaperQuality(),content_finish:photobook.getContentFinish(),number_of_pages:photobook.getSelectedNumberOfPages(),pictures_per_page:$('#SliderSingle').val(),customer_msg:$('textarea[name="instructions"]').val(),price_region:PikCountrySelect.getCountry(),name:$('.zone_photobook_name input[name="name"]').val(),job_type:$('input[name="job_type"]:checked').val(),runtime:runtime,recommendations:$('#recommendations').serialize(),embossing:$('input[name="embossing"]').val(),acrylic:$('#acrylic-cover').val(),cameo:$('#cameo-cover').val(),presentation_box:$('#presentation_box').val(),box_color_id:$('#box_color_id').val(),upload_via_link:$('#uploadViaLink').val()};}
function updateJob(fCreateJob,runtime){var data=getUpdateJobData(runtime);$('#costomer_file_form').ajaxSubmit({url:values.setNewJobUrl,data:data,dataType:'json',type:'POST',success:function(resp){checkErrorMessage(resp);if(!resp.error){fCreateJob();}}});}
function scrollToElement(element,offset){if(!offset){offset=0;}
$('html, body').animate({scrollTop:$(element).offset().top+offset},1000);}
function validatePhotobookForm(){var isValid=true,nameInput=$('.zone_photobook_name input'),data={photobook_name:nameInput.val()};$('.zone_photobook_name .errors').remove();if(data.photobook_name==""){nameInput.after('<ul class="errors"><li>'+messages.error_photobook_name+'</li></ul>');isValid=false;scrollToElement('.zone_photobook_name',-100);nameInput.focus();}
return isValid;}
function displayErrors($form,errors){$form.find('ul.errors').remove();if(errors){$.each(errors,function(k,v){var $element=$form.find('[name='+k+']').not('[type="hidden"]'),ul;if($element.attr("type")=="checkbox"){ul=$element.parent().after('<ul class="errors"></ul>').next('.errors');}else{ul=$element.after('<ul class="errors"></ul>').next('.errors');}
$.each(v,function(){ul.append('<li>'+this+'</li>');});});}}
function processLoginForm(fCreateJob){var form=$(this);form.find('input[type="submit"]').attr('disabled','disabled');form.ajaxSubmit({data:{ajax:1},dataType:'json',success:function(resp){form.find('input[type="submit"]').removeAttr('disabled');displayErrors(form,resp.errors);if(resp.success){$('#authPopup').modal('hide');fCreateJob(resp);}}});return false;}
function processRegForm(fCreateJob){var form=$(this);form.find('input[type="submit"]').attr('disabled','disabled');form.ajaxSubmit({data:{ajax:1},dataType:'json',success:function(resp){form.find('input[type="submit"]').removeAttr('disabled');displayErrors(form,resp.errors);if(resp.success){$('#authPopup').modal('hide');fCreateJob();}}});return false;}
function showAuthBox(fCreateJob){$('#authPopup').modal('show');$(document).off('submit','#loginId');$(document).on('submit','#loginId',function(e){e.preventDefault();processLoginForm.call(this,fCreateJob);});$('form#registrationId').unbind('submit');$('form#registrationId').submit(function(e){e.preventDefault();return processRegForm.call(this,fCreateJob);});}
function disable(){}
function enable(){var uploader=$("#uploaderId").plupload('getUploader');uploader.ppJobId=null;uploader.ppJobCreated=0;uploader.ppFirstCheck=0;uploader.ppStartCount=0;uploader.ppFilesUploaded=0;$("#uploaderId_browse").button('enable');$(".plupload_start").button("disable");$('.job_type input:radio').attr('disabled',false);$('.zone_photobook_name input').attr('disabled',false);$('#cancel-button').hide();}
function checkErrorMessage(resp){if(resp.msg){var msgPopup=$('#msgPopup');msgPopup.find('p.message').html(resp.msg);msgPopup.modal('show');}}
function escapeFilename(name){var tagsToReplace={'Š':'S','š':'s','Ð':'Dj','Ž':'Z','ž':'z','À':'A','Á':'A','Â':'A','Ã':'A','Ä':'A','Å':'A','Æ':'A','Ç':'C','È':'E','É':'E','Ê':'E','Ë':'E','Ì':'I','Í':'I','Î':'I','Ï':'I','Ñ':'N','Ò':'O','Ó':'O','Ô':'O','Õ':'O','Ö':'O','Ø':'O','Ù':'U','Ú':'U','Û':'U','Ü':'U','Ý':'Y','Þ':'B','ß':'Ss','à':'a','á':'a','â':'a','ã':'a','ä':'a','å':'a','æ':'a','ç':'c','è':'e','é':'e','ê':'e','ë':'e','ì':'i','í':'i','î':'i','ï':'i','ð':'o','ñ':'n','ò':'o','ó':'o','ô':'o','õ':'o','ö':'o','ø':'o','ù':'u','ú':'u','û':'u','ý':'y','þ':'b','ÿ':'y','ƒ':'f','©':'(c)','̈':' '};name=name.replace(/./g,function(tag){return tagsToReplace[tag]||tag;});name=name.replace(/[^a-zA-Z0-9\-_()\[\]:.;!@#$%^&* ]/g,"");return name;}
function updateFileName(file,decode){var name=file.name,chunks,ext;name=escapeFilename(name);chunks=name.split('.');ext=chunks[chunks.length-1];var size=isNaN(file.size)?'':file.size;if(!decode){name=name.replace('.'+ext,'');if(size)name=name.replace('_'+size,'');name=size?(name+'_'+size+'.'+ext):(name+'.'+ext);}else{name=name.replace('.'+ext,'');name=size?name.replace('_'+size,''):name;name=name+'.'+ext;}
return name.trim();}
return{init:init,initDefaults:initDefaults,getUploadData:getUploadData,getUserId:getUserId,showAuthBox:showAuthBox,updateValues:updateValues,getValue:getValue,setValue:setValue,updateJob:updateJob,getUpdateJobData:getUpdateJobData,checkIsLoggedIn:checkIsLoggedIn,validatePhotobookForm:validatePhotobookForm,disable:disable,enable:enable,scrollToElement:scrollToElement,checkErrorMessage:checkErrorMessage,updateFileName:updateFileName};})();var PikBSScroll=(function(){function enable(){if($('ul.errorList:first').length!=0){$('html, body').animate({scrollTop:$('ul.errorList:first').offset().top-100},300);}}
return{enable:enable}})();var PikMailChimpForm=(function(){function submitForm(e){e.preventDefault();$('#mailchimpForm,#mailchimpSubscribed').toggleClass('hide');$.post($('#mailchimpForm').attr('action'),$('#mailchimpForm').serialize());}
$(document).on('submit','#mailchimpForm',submitForm);})();$(window).load(function(){if($('#flashPopup').length){$('#flashPopup').modal('show');}
if($('#popupMessage').length){$('#popupMessage').modal('show');}});$(document).ready(function(){$(document).on('paste','.confirmEmailInput',function(e){e.preventDefault();});if($('.flashMessages').find('.alert').length){window.setTimeout(function(){$('.flashMessages').find('.alert').alert('close');},10000);}});
if(!window.Pik)window.Pik={};Pik.initCart=function(){var checkoutForm=$('#checkoutForm'),itemToRemove;function submitForm(operation,submit){$('#operation').val(operation);checkoutForm.attr('action','operation');if(submit!==false){checkoutForm.submit();}}
$('.addSmiler').click(function(){submitForm('addSmiler',false);});$('.addPocket').click(function(){submitForm('addPocket',false);});$('.products-footer .form-content .radio input[type="radio"] + span').click(function(){var radioInput=$(this).prev();if(!radioInput.prop('checked')){$('.form-content .radio input[type="radio"]:checked').prop('checked',false);radioInput.prop('checked',true);submitForm('changeShipping',true);}});$(document).on('click','.removeItem',function(){itemToRemove=$(this).attr('data-remove-item');});$(document).on('click','#yesRemoveItem,.removeSmallItem',function(e){e.preventDefault();var that=$(this);if(that.hasClass('removeSmallItem')){itemToRemove=that.attr('data-remove-item');}
$(document).find('input[name="'+itemToRemove+'"]').val(1);submitForm('delete');});$(document).on('change','select.quantity',function(){submitForm('update');});$(document).on('click','#apply-discount',function(e){e.preventDefault();if($('#code').val().length){submitForm('discount');}else{$('#discountId').show().removeClass('hidden');}});$(document).on('click','#apply-gift',function(e){e.preventDefault();if($('#gift_code').val().length){submitForm('gift');}});$(document).on('click','.showPromoContainer',function(){$(this).removeClass('showPromoContainer');$('.promoCodeContainer.hidden').removeClass('hidden');});};Pik.Network=new(function(settings,$){var online=true;var timer;var started=false;function ping(){$.ajax({type:"POST",url:settings.url,timeout:settings.interval,dataType:"text",cache:false,error:function(data,textStatus,jqXHR){if(data.statusText=='error'){if(online===true){online=false;$.event.trigger('pik.network.change',{status:'offline'},document);}}},success:function(data,textStatus,jqXHR){if((jqXHR.readyState===4&&jqXHR.status===0)||!data){this.error(data,"NODATA",jqXHR);return;}
if(online===false){online=true;$.event.trigger('pik.network.change',{status:'online'},document);}}});}
return{startPing:function(){started=true;timer=setInterval(ping,settings.interval);},stopPing:function(){clearInterval(timer);},isOnline:function(){return online;},isStarted:function(){return started;}}})({url:'/upload.php?ping=1',interval:5000},jQuery);if(!Pik.Web)Pik.Web={};Pik.Web.Review=new(function($){var isActive=true;var timeout=null;var messages={};function _displayMsg(text,autoHide){if(timeout)clearTimeout(timeout);$('#save-text').html(text);$('#save-display').show();if(autoHide)
timeout=setTimeout(function(){$('#save-display').fadeOut(3000)},3000);}
function _changeButtons(isActive){if(!isActive){_displayMsg(messages.offline,false);$('#add-caption').css({visibility:'hidden'});$('#add-feedback').css({visibility:'hidden'});}else{$('#save-display').fadeOut(3000);$('#add-caption').css({visibility:'visible'});$('#add-feedback').css({visibility:'visible'});}}
function _init(msgs){messages=msgs;$(document).on('pik.network.change',function(event,data){isActive=(data.status=='online');_changeButtons(isActive);});}
return{init:_init,getMsgTimeout:function(){return timeout;},setMsgTimeout:function(_timeout){timeout=_timeout;}};})(jQuery);Pik.Web.Upload=new(function($){var isActive=true,timeout=null,messages={},resumeUpload=false,resumeUploadBackup=false,resumeBackupInterval=null,jobCreated=false;function _displayMsg(text,autoHide){if(timeout)clearTimeout(timeout);$('#save-text').html(text);$('#save-display').show();PhotobookUtil.scrollToElement($("#save-display"),-80);if(autoHide)
timeout=setTimeout(function(){$('#save-display').fadeOut(15000)},3000);}
function _changeButtons(isActive){if(!isActive){_displayMsg(messages.offline,false);}else{$('#save-display').hide();_resumeMessage(true);}}
function _resumeMessage(msg){return;if(msg){_displayMsg(messages.online,false);var language=$('#language').val();var job_number=$("#hidden-input").val();$("#restart-upload").click(function(){if(state){state.isRestart=true;window.onbeforeunload=null;window.onunload=null;}
if(document.view.upload.state){document.view.upload.state.isRestart=true;window.onbeforeunload=null;window.onunload=null;}
$.ajax({type:"POST",url:'/'+language+'/photobook/upload/restart-job',data:{job_number:job_number},success:function(){var uploader=$('#uploaderId').plupload('getUploader');Pik.Network.stopPing();uploader.stop();window.location=$("#restart-upload").attr('href');}});return false;});$("#restart-upload").attr("href","/"+language+"/photobook/restart/index/job/"+$("#hidden-input").val());}else{$("#save-display").fadeOut(2000);}}
function _resumeUploadCallback(){var uploader=$('#uploaderId').plupload('getUploader');if(Pik.Network.isOnline()&&uploader&&uploader.state==plupload.STOPPED){uploader.start();}
else if(Pik.Network.isOnline()&&uploader&&uploader.state==plupload.STARTED){clearInterval(resumeBackupInterval);}}
function _init(msgs){messages=msgs;$(document).on('pik.network.change',function(event,data){isActive=(data.status=='online');var uploader=$('#uploaderId').plupload('getUploader');if(isActive&&uploader){uploader.start();if(resumeBackupInterval){clearInterval(resumeBackupInterval);}
resumeBackupInterval=setInterval(_resumeUploadCallback,30000);}
if(!isActive&&uploader){uploader.stop();}
if(jobCreated){_changeButtons(isActive);}});}
function _setJobCreated(jc){jobCreated=jc?true:false;}
function _setResumeUpload(resume){resumeUpload=resumeUploadBackup=resume;}
function setMessages(msgs){messages=msgs;}
return{init:_init,setMessages:setMessages,resumeMessage:_resumeMessage,getMsgTimeout:function(){return timeout;},setMsgTimeout:function(_timeout){timeout=_timeout;},setResumeUpload:_setResumeUpload,setJobCreated:_setJobCreated};})(jQuery);Pik.OldPassword=new(function($){function _displayErrors(errors){var $form=$('#oldPasswordForm');$form.find('ul.errors').remove();if(errors){$.each(errors,function(k,v){var $element=$form.find('[name='+k+']').not('[type="hidden"]'),ul;if($element.attr("type")=="checkbox"){ul=$element.parent().after('<ul class="errors"></ul>').next('.errors');}else{ul=$element.after('<ul class="errors"></ul>').next('.errors');}
$.each(v,function(){ul.append('<li>'+this+'</li>');});});}}
function _submitForm(e){e.preventDefault();$('#oldPasswordForm').find('input[type="submit"]').attr('disabled','disabled');$.post($(this).attr('action'),$(this).serialize(),function(resp){$('#oldPasswordForm').find('input[type="submit"]').removeAttr('disabled');var errors=resp.errors?resp.errors:[];_displayErrors(errors);if(resp.success){$('#changeOldPasswordModal').modal('hide');}});}
function _init(){if($('#changeOldPasswordModal').length){$('#changeOldPasswordModal').modal('show');}
$(document).on('submit','#oldPasswordForm',_submitForm)}
return{init:_init};})(jQuery);$(window).load(function(){Pik.OldPassword.init();});$(document).ready(function(){if($('#checkoutForm').length){Pik.initCart();}});
PikNavigation=(function(){var state='hidden';function init(){$('.mobileMenuToggle').on('click',function(e){e.preventDefault();if(state=='hidden'){state='visible';$('body .mobileMenu').animate({right:'0px'},200);$('body > .wrapper').toggleClass('mobileMenuOn').animate({left:'-275px'},200);$('body').toggleClass('modal-open');}else{state='hidden';$('body .mobileMenu').animate({right:'-275px'},200);$('body > .wrapper').toggleClass('mobileMenuOn').animate({left:'0px'},200);$('body').toggleClass('modal-open');}});}
init();return{}})();
PikQuickChat=function(){var url;function init(requestUrl){url=requestUrl;$('.qcTrigger').on('click',toggleChat);$('#quickChatForm').submit(messageSubmit);}
function messageSubmit(event){event.preventDefault();removeErrorMessages();$.post(url,$(this).serialize(),function(response){if(response['success']){handleSuccess();}else{for(var i in response['error_msg']){for(var j in response['error_msg'][i]){$('.quickChat #quickChatForm input[name="'+i+'"]+ul, .quickChat #quickChatForm textarea[name="'+i+'"]+ul').append('<li>'+response['error_msg'][i][j]+'</li>');}}}});}
function removeErrorMessages(){$('.quickChat #quickChatForm ul li').remove();}
function toggleChat(){$('.quickChat .qcContent .qcSuccess').addClass('hide');$('.quickChat .qcContent form').removeClass('hide');$('.quickChat input[type="text"], .quickChat textarea').val('');$('.quickChat').toggleClass('opened');changeIcon();removeErrorMessages();}
function changeIcon(){$('.qcTrigger a img').toggleClass('hide');}
function handleSuccess(){$('.quickChat .qcContent .qcSuccess').removeClass('hide');$('.quickChat .qcContent form').addClass('hide');}
return{init:init}};
PikCustomerReviews=new(function($){function loadMore(e){e.preventDefault();var box=$(this).parents('.testimonial-box:first');box.find('.testimonial-item.hide').removeClass('hide');if(!box.find('.testimonial-item.hide').length){box.find('.load-more').addClass('hide');}}
function _init(){$(document).on('click','.testimonial-box .load-more',loadMore)}
return{init:_init};})(jQuery);$(document).ready(function(){PikCustomerReviews.init();});
PikPrivacyPolicy=new(function($){function _acceptPolicy(){$.post($(this).attr('data-url'));$('#privacyPolicyModal').modal('hide');}
function _init(){if($('#privacyPolicyModal').length){$('#privacyPolicyModal').modal('show');}
$(document).on('click','#privacyPolicyModal button',_acceptPolicy)}
return{init:_init};})(jQuery);$(window).load(function(){PikPrivacyPolicy.init();});
PikCookieConsent=new(function($){function _cookieConsent(){$.post($(this).attr('data-url'))
$('#cookieConsent').remove();}
function _init(){$(document).on('click','#cookieConsent button',_cookieConsent)}
return{init:_init};})(jQuery);$(document).ready(function(){PikCookieConsent.init();});
var PikExitIntentModal=(function(){var modal;function init(){var el=$('#exitIntentModal');if(el.length){modal=ouibounce(null,{cookieName:'exitIntentCookie',delay:100,callback:function(){el.modal('show')}});}}
function disable(){if(modal){modal.disable();}}
$(document).ready(function(){init();});return{disable:disable}})();
var PikCountrySelect=(new function(){var refreshFlag=true;function init(){if(!getCountry()){$('.countriesSelect').find('.countriesList a:first').addClass('selected');}
updateCountryIcon();$(document).on('click','.countriesList a:not(.languageRedirect)',selectCountry);}
function selectCountry(e){var that=$(this),countryIso=that.attr('data-iso');e.preventDefault();$('.countriesSelect').find('.countriesList a.selected').removeClass('selected');that.addClass('selected');updateCountryIcon();$.event.trigger('pik.country.change',{country:countryIso},document);$.post($('.countriesSelect:first').attr('data-route'),{country:countryIso},function(){if(refreshFlag){location.reload();}});}
function getCountry(){return $('.countriesSelect:first').find('.countriesList a.selected').attr('data-iso');}
function updateCountryIcon(){$('#languageSelectorButton').attr('class',$('#languageSelectorButton').attr('default-class')+' flag-'+getCountry());$('.countriesSelect').find('.countryName').html($('.countriesSelect').find('.footerLocation a.selected').html());}
function noRefresh(){refreshFlag=false;}
init();return{getCountry:getCountry,noRefresh:noRefresh}});
PikSticky=new(function($){function init(){$(".navbar-brand").removeClass("hide");$(".nav-buttton").removeClass("hide");var stickyToggle=function(sticky,stickyWrapper,scrollElement){var stickyHeight=sticky.outerHeight();var stickyTop=stickyWrapper.offset().top;if(scrollElement.scrollTop()>=stickyTop){stickyWrapper.height(stickyHeight);sticky.addClass("is-sticky");}else{sticky.removeClass("is-sticky");stickyWrapper.height('auto');}};$('[data-toggle="sticky-onscroll"]').each(function(){var sticky=$(this);var stickyWrapper=$('<div>').addClass('sticky-wrapper');sticky.before(stickyWrapper);sticky.addClass('sticky');$(window).on('scroll.sticky-onscroll resize.sticky-onscroll',function(){stickyToggle(sticky,stickyWrapper,$(this));});stickyToggle(sticky,stickyWrapper,$(window));});}
return{init:init};})(jQuery);$(window).load(function(){PikSticky.init();});
$(window).load(function(){if($('#tweedwolfReferer').length){$('#tweedwolfReferer').modal('show');}});
PikHashModals=new(function($){function init(){if(window.location.hash){var hash=window.location.hash;if(hash==='#christmasDeadline'&&$('#christmasDeadline').length){setTimeout(function(){$('#christmasDeadline').modal('show');},1000)}}}
return{init:init};})(jQuery);$(document).ready(function(){PikHashModals.init();});